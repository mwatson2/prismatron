2025-08-18 19:43:34,514 - 00:00.001 - src.utils.log_rotation - INFO - Log rotation worker started, checking every 300s for files > 100MB
2025-08-18 19:43:34,515 - 00:00.001 - src.utils.log_rotation - INFO - Log rotator started: monitoring prismatron.log (max 100MB)
2025-08-18 19:43:34,515 - 00:00.002 - __main__ - INFO - Log rotation service started (max 100MB per file, 200MB total)
2025-08-18 19:43:34,517 - 00:00.004 - __main__ - INFO - Loaded LED count from patterns: 3200
2025-08-18 19:43:34,517 - 00:00.004 - __main__ - INFO - Starting Prismatron LED Display System
2025-08-18 19:43:34,518 - 00:00.004 - __main__ - INFO - Configuration: {'debug': False, 'web_host': '0.0.0.0', 'web_port': 8080, 'wled_host': '192.168.7.140', 'wled_port': 4048, 'default_content_dir': None, 'diffusion_patterns_path': 'diffusion_patterns/capture-0813.npz', 'led_count': 3200, 'timing_log_path': None, 'enable_batch_mode': True, 'enable_position_shifting': False, 'max_shift_distance': 3, 'shift_direction': 'alternating', 'enable_adaptive_frame_dropping': False, 'enable_audio_reactive': False, 'audio_device': None}
2025-08-18 19:43:34,521 - 00:00.007 - src.core.control_state - INFO - Shared lock set for inter-process synchronization
2025-08-18 19:43:34,521 - 00:00.008 - src.core.control_state - INFO - Shared events set for inter-process coordination
2025-08-18 19:43:34,523 - 00:00.010 - __main__ - INFO - Starting Prismatron system processes...
2025-08-18 19:43:34,524 - 00:00.011 - src.core.control_state - INFO - Initialized control state 'prismatron_control' with 2048 bytes
2025-08-18 19:43:34,524 - 00:00.011 - __main__ - INFO - Starting playlist synchronization service...
2025-08-18 19:43:34,531 - 00:00.018 - __main__ - INFO - Starting web server...
2025-08-18 19:43:34,532 - 00:00.019 - src.core.control_state - INFO - Shared lock set for inter-process synchronization
2025-08-18 19:43:34,533 - 00:00.020 - src.core.control_state - INFO - Shared events set for inter-process coordination
2025-08-18 19:43:34,534 - 00:00.021 - src.core.playlist_sync - INFO - Playlist sync service initialized with socket: /tmp/prismatron_playlist.sock
2025-08-18 19:43:34,535 - 00:00.022 - src.core.playlist_sync - INFO - Playlist sync server loop started
2025-08-18 19:43:34,535 - 00:00.022 - src.core.playlist_sync - INFO - Playlist sync service started on /tmp/prismatron_playlist.sock
2025-08-18 19:43:34,537 - 00:00.024 - __main__ - INFO - Starting consumer process...
2025-08-18 19:43:34,539 - 00:00.025 - src.core.control_state - INFO - Shared lock set for inter-process synchronization
2025-08-18 19:43:34,539 - 00:00.026 - src.core.control_state - INFO - Shared events set for inter-process coordination
2025-08-18 19:43:34,540 - 00:00.027 - src.web.api_server - INFO - Initialized SystemSettings with LED count: 3200
2025-08-18 19:43:34,542 - 00:00.028 - src.core.control_state - INFO - Connected to control state 'prismatron_control'
2025-08-18 19:43:34,542 - 00:00.029 - src.web.api_server - INFO - API server connected to control state
2025-08-18 19:43:34,543 - 00:00.030 - __main__ - INFO - Starting producer process...
2025-08-18 19:43:34,545 - 00:00.032 - src.core.control_state - INFO - Shared lock set for inter-process synchronization
2025-08-18 19:43:34,546 - 00:00.032 - src.core.control_state - INFO - Shared events set for inter-process coordination
2025-08-18 19:43:34,547 - 00:00.034 - __main__ - INFO - Consumer worker environment:
2025-08-18 19:43:34,547 - 00:00.034 - __main__ - INFO -   PATH: /home/mark/dev/prismatron/env/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
2025-08-18 19:43:34,548 - 00:00.034 - __main__ - INFO -   LD_LIBRARY_PATH: /mnt/dev/prismatron/env/lib/python3.10/site-packages/cv2/../../lib64:/usr/local/cuda/lib64
2025-08-18 19:43:34,548 - 00:00.035 - __main__ - INFO -   CUDA_HOME: /usr/local/cuda
2025-08-18 19:43:34,548 - 00:00.035 - __main__ - INFO -   CUDA_VISIBLE_DEVICES: NOT SET
2025-08-18 19:43:34,548 - 00:00.035 - __main__ - INFO -   NVIDIA_VISIBLE_DEVICES: NOT SET
2025-08-18 19:43:34,550 - 00:00.036 - __main__ - INFO - Waiting for all processes to initialize...
2025-08-18 19:43:34,551 - 00:00.038 - src.core.control_state - INFO - Shared lock set for inter-process synchronization
2025-08-18 19:43:34,552 - 00:00.038 - src.core.control_state - INFO - Shared events set for inter-process coordination
2025-08-18 19:43:34,555 - 00:00.042 - src.core.shared_buffer - INFO - Initialized ring buffer 'prismatron_buffer' with 3 buffers
2025-08-18 19:43:34,555 - 00:00.042 - src.core.control_state - INFO - Connected to control state 'prismatron_control'
2025-08-18 19:43:34,556 - 00:00.043 - src.core.playlist_sync - INFO - Playlist sync client 'producer' initialized
2025-08-18 19:43:34,557 - 00:00.044 - src.core.playlist_sync - INFO - Playlist sync client 'producer' listener started
2025-08-18 19:43:34,557 - 00:00.044 - src.core.playlist_sync - INFO - New playlist sync client connected: a77e9d49-f72a-43d2-a0c9-abe46ad2f905
2025-08-18 19:43:34,558 - 00:00.044 - src.core.playlist_sync - INFO - Playlist sync client 'producer' connected
2025-08-18 19:43:34,558 - 00:00.045 - src.producer.producer - INFO - Producer connected to playlist synchronization service
2025-08-18 19:43:34,558 - 00:00.045 - src.producer.producer - INFO - Producer process initialized successfully
2025-08-18 19:43:34,559 - 00:00.046 - src.producer.producer - INFO - Playlist cleared
2025-08-18 19:43:34,560 - 00:00.046 - src.producer.producer - INFO - Producer process started
2025-08-18 19:43:34,560 - 00:00.047 - src.producer.producer - INFO - PLAYLIST INDEX SYNC: Producer index -1 -> playlist index 0
2025-08-18 19:43:34,560 - 00:00.047 - __main__ - INFO - Producer ready - waiting for API play command
2025-08-18 19:43:34,561 - 00:00.048 - src.producer.producer - INFO - Producer playlist synchronized: 0 items, current_index=0, playing=False
2025-08-18 19:43:34,616 - 00:00.103 - src.network.manager - INFO - Detected WiFi interface: wlP1p1s0
2025-08-18 19:43:34,617 - 00:00.104 - src.web.api_server - INFO - Network manager initialized
2025-08-18 19:43:34,617 - 00:00.104 - src.core.playlist_sync - INFO - Playlist sync client 'web_interface' initialized
2025-08-18 19:43:34,618 - 00:00.105 - src.core.playlist_sync - INFO - New playlist sync client connected: a200a4a0-de21-4cc5-8ba6-4c1c5393981e
2025-08-18 19:43:34,618 - 00:00.105 - src.core.playlist_sync - INFO - Playlist sync client 'web_interface' listener started
2025-08-18 19:43:34,618 - 00:00.105 - src.core.playlist_sync - INFO - Playlist sync client 'web_interface' connected
2025-08-18 19:43:34,619 - 00:00.106 - src.web.api_server - INFO - Connected to playlist synchronization service
2025-08-18 19:43:34,620 - 00:00.107 - src.web.api_server - INFO - Started preview data broadcasting task
2025-08-18 19:43:34,661 - 00:00.148 - src.producer.producer - INFO - PRODUCER PIPELINE [ProducerState.STOPPED]: 0 frames produced, 0 with content (0.0%), current: None
2025-08-18 19:43:36,204 - 00:01.691 - src.consumer.led_optimizer - INFO - Using GPU: Orin
2025-08-18 19:43:36,204 - 00:01.691 - src.consumer.led_optimizer - INFO - GPU Memory: 4194MB free
2025-08-18 19:43:36,205 - 00:01.692 - src.consumer.audio_beat_analyzer - INFO - Found USB Audio Device at index 0: USB Audio Device: - (hw:0,0)
2025-08-18 19:43:36,205 - 00:01.692 - src.consumer.audio_beat_analyzer - INFO - Aubio initialized successfully
2025-08-18 19:43:36,206 - 00:01.692 - src.consumer.audio_beat_analyzer - INFO - Aubio available: version 0.4.9
2025-08-18 19:43:36,206 - 00:01.692 - src.consumer.audio_beat_analyzer - INFO - AudioBeatAnalyzer initialized (aubio, hop_size=512, USB device=0)
2025-08-18 19:43:36,206 - 00:01.693 - src.consumer.consumer - INFO - Audio beat analyzer initialized (ready for dynamic enable/disable)
2025-08-18 19:43:36,206 - 00:01.693 - src.consumer.consumer - INFO - Adaptive frame dropping disabled
2025-08-18 19:43:36,209 - 00:01.696 - src.utils.pattern_loader - INFO - Loaded and validated LED ordering: 3200 LEDs from diffusion_patterns/capture-0813.npz
2025-08-18 19:43:36,209 - 00:01.696 - src.consumer.audio_reactive_position_shifter - INFO - AudioReactivePositionShifter initialized: max_shift=3, direction=alternating, enabled=False
2025-08-18 19:43:36,209 - 00:01.696 - src.consumer.frame_renderer - INFO - FrameRenderer initialized: delay=0.0ms, tolerance=Â±5.0ms
2025-08-18 19:43:36,210 - 00:01.696 - src.utils.pattern_loader - INFO - Frame renderer configured with LED ordering for 3200 LEDs
2025-08-18 19:43:36,210 - 00:01.696 - src.consumer.consumer - INFO - Frame renderer created with LED ordering from diffusion_patterns/capture-0813.npz
2025-08-18 19:43:36,210 - 00:01.697 - src.consumer.transition_processor - INFO - Transition processor initialized
2025-08-18 19:43:36,210 - 00:01.697 - src.consumer.led_transition_processor - INFO - LED transition processor initialized
2025-08-18 19:43:36,210 - 00:01.697 - __main__ - INFO - Initializing consumer process...
2025-08-18 19:43:36,210 - 00:01.697 - src.consumer.consumer - INFO - Initializing consumer process...
2025-08-18 19:43:36,211 - 00:01.698 - src.core.shared_buffer - INFO - Connected to ring buffer 'prismatron_buffer'
2025-08-18 19:43:36,211 - 00:01.698 - src.core.control_state - INFO - Connected to control state 'prismatron_control'
2025-08-18 19:43:36,684 - 00:02.171 - src.web.api_server - INFO - WebSocket connected: 1 total connections
2025-08-18 19:43:38,088 - 00:03.575 - src.consumer.consumer - INFO - Using LED count from pattern: 3200
2025-08-18 19:43:38,089 - 00:03.576 - src.consumer.led_buffer - INFO - Initialized LED buffer with 16 frames (0.1MB)
2025-08-18 19:43:38,089 - 00:03.576 - src.consumer.wled_sink - INFO - LED array fragmentation: 7 packets, 476 LEDs (1428 bytes) per packet, last packet 344 LEDs (1032 bytes)
2025-08-18 19:43:41,144 - 00:06.630 - src.consumer.wled_sink - WARNING - Failed to connect to WLED at 192.168.7.140
2025-08-18 19:43:41,144 - 00:06.631 - src.consumer.preview_sink - INFO - Preview sink initialized with shared memory size: 12288 bytes
2025-08-18 19:43:41,145 - 00:06.631 - src.consumer.preview_sink - INFO - Preview sink header format: <ddii40x
2025-08-18 19:43:41,145 - 00:06.632 - src.consumer.preview_sink - INFO - Created shared memory: 12288 bytes
2025-08-18 19:43:41,145 - 00:06.632 - src.consumer.preview_sink - INFO - Preview sink started successfully
2025-08-18 19:43:41,145 - 00:06.632 - src.consumer.consumer - INFO - Preview sink initialized and started successfully
2025-08-18 19:43:41,145 - 00:06.632 - src.consumer.frame_renderer - INFO - Registered sink: WLED (enabled=True)
2025-08-18 19:43:41,145 - 00:06.632 - src.consumer.frame_renderer - INFO - Registered sink: PreviewSink (enabled=True)
2025-08-18 19:43:41,146 - 00:06.632 - src.consumer.frame_renderer - INFO - Output targets: WLED=True, TestSink=False, Preview=True
2025-08-18 19:43:41,146 - 00:06.632 - src.consumer.consumer - INFO - Consumer process initialized successfully
2025-08-18 19:43:41,146 - 00:06.632 - __main__ - INFO - Consumer initialized successfully (WLED connection will be retried automatically)
2025-08-18 19:43:41,147 - 00:06.634 - src.consumer.consumer - INFO - Optimization thread started
2025-08-18 19:43:41,147 - 00:06.634 - __main__ - INFO - All processes started successfully!
2025-08-18 19:43:41,148 - 00:06.634 - __main__ - INFO - System started successfully!
2025-08-18 19:43:41,148 - 00:06.634 - __main__ - INFO - Web interface available at http://0.0.0.0:8080
2025-08-18 19:43:41,148 - 00:06.634 - src.consumer.consumer - INFO - Renderer thread started
2025-08-18 19:43:41,148 - 00:06.635 - __main__ - INFO - Starting process monitoring loop...
2025-08-18 19:43:41,148 - 00:06.635 - src.consumer.consumer - INFO - WLED reconnection thread started
2025-08-18 19:43:41,149 - 00:06.636 - src.consumer.consumer - INFO - Consumer process started with optimization, renderer, and WLED reconnection threads
2025-08-18 19:43:41,149 - 00:06.636 - src.consumer.consumer - INFO - Initial renderer state: RendererState.STOPPED
2025-08-18 19:43:54,232 - 00:19.718 - src.consumer.wled_sink - WARNING - Failed to connect to WLED at 192.168.7.140
2025-08-18 19:44:07,288 - 00:32.774 - src.consumer.wled_sink - WARNING - Failed to connect to WLED at 192.168.7.140
2025-08-18 19:44:17,881 - 00:43.368 - src.web.api_server - WARNING - WebSocket message error: (1001, '')
2025-08-18 19:44:17,882 - 00:43.368 - src.web.api_server - INFO - WebSocket disconnected: 0 total connections
2025-08-18 19:44:20,344 - 00:45.831 - src.consumer.wled_sink - WARNING - Failed to connect to WLED at 192.168.7.140
2025-08-18 19:44:33,400 - 00:58.887 - src.consumer.wled_sink - WARNING - Failed to connect to WLED at 192.168.7.140
2025-08-18 19:45:46,048 - 02:11.535 - src.web.api_server - INFO - WebSocket connected: 1 total connections
2025-08-18 19:45:47,582 - 02:13.069 - src.web.api_server - WARNING - WebSocket message error: (1001, '')
2025-08-18 19:45:47,583 - 02:13.070 - src.web.api_server - INFO - WebSocket disconnected: 0 total connections
2025-08-18 19:45:47,832 - 02:13.319 - src.web.api_server - INFO - WebSocket connected: 1 total connections
2025-08-18 19:45:54,685 - 02:20.172 - src.network.manager - ERROR - Command failed: nmcli device wifi rescan, error: Error: org.freedesktop.NetworkManager.wifi.scan request failed: not authorized.
2025-08-18 19:45:54,686 - 02:20.172 - src.network.manager - WARNING - WiFi rescan failed (using cached results): Command failed: Error: org.freedesktop.NetworkManager.wifi.scan request failed: not authorized.
2025-08-18 19:45:59,108 - 02:24.595 - src.network.manager - ERROR - Command failed: nmcli device wifi rescan, error: Error: org.freedesktop.NetworkManager.wifi.scan request failed: not authorized.
2025-08-18 19:45:59,109 - 02:24.596 - src.network.manager - WARNING - WiFi rescan failed (using cached results): Command failed: Error: org.freedesktop.NetworkManager.wifi.scan request failed: not authorized.
2025-08-18 19:46:19,021 - 02:44.508 - src.web.api_server - WARNING - WebSocket message error: (1006, '')
2025-08-18 19:46:19,022 - 02:44.509 - src.web.api_server - INFO - WebSocket disconnected: 0 total connections
2025-08-18 19:53:41,736 - 10:07.223 - __main__ - INFO - Monitor loop - Uptime: 00:10:00
2025-08-18 20:03:42,328 - 20:07.815 - __main__ - INFO - Monitor loop - Uptime: 00:20:01
